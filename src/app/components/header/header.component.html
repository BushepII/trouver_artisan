<header class="w-full fixed top-0 left-0 z-50 xl:shadow-md bg-[#f1f8fc]">
    <nav class="xl:max-w-3/5 xl:mx-auto shadow-md xl:shadow-none">
        <div class="flex justify-between items-center p-2">
            <!-- Logo -->
            <a (click)="navigateHome()" class="mr-10 hover:cursor-pointer max-w-lg"><img src="/assets/images/Logo.png" alt="Logo trouve ton artisan de la région Auvergne-Rhône-Alpes" class="w-full h-auto"></a>

            <!-- Desktop Menu -->
            <div class="flex items-center lg:flex-col lg:items-end">
                <div class="hidden lg:flex items-center border-b-1 border-r-1 border-[#0074c7] p-2 focus-within:ring-2 focus-within:ring-[#0074c7] mb-4">
                    <form class="flex" (ngSubmit)="onSearch()">
                        <input type="text" name="search" [(ngModel)]="searchQuery" placeholder="Rechercher..." class="bg-transparent border-none focus:outline-none w-full opacity-50"/>
                        <button type="submit" class="rounded-full">
                            <img src="https://www.auvergnerhonealpes.fr/themes/custom/aura_region_theme/assets/images/optimized/icons/search-blue.svg" alt="" class="w-full max-w-lg h-auto">
                        </button>
                    </form>
                </div>

                <div class="hidden lg:flex space-x-10 items-center">
                    <a (click)="navigateToCategory('Bâtiment')" class="hover:text-black/60 text-xl hover:cursor-pointer">Bâtiment</a>
                    <a (click)="navigateToCategory('Services')" class="hover:text-black/60 text-xl hover:cursor-pointer">Services</a>
                    <a (click)="navigateToCategory('Fabrication')" class="hover:text-black/60 text-xl hover:cursor-pointer">Fabrication</a>
                    <a (click)="navigateToCategory('Alimentation')" class="hover:text-black/60 text-xl hover:cursor-pointer">Alimentation</a>
                </div>
    
                <!-- Mobile Menu Button -->
                <button type="button" class="rounded-full lg:hidden size-10" (click)="handleSection('search')" [attr.aria-expanded]="isSearchOpen"><img src="https://www.auvergnerhonealpes.fr/themes/custom/aura_region_theme/assets/images/optimized/icons/search-blue.svg" alt="" class="w-full h-auto"></button>

                <button type="button" class="menu lg:hidden size-15 relative flex flex-col items-center justify-center rounded-md p-2 focus:ring-2 focus:ring-dark focus:outline-hidden focus:ring-inset" aria-controls="mobile-menu" aria-expanded="false" (click)="handleSection('menu')" [attr.aria-expanded]="isMenuOpen">
                    <span class="absolute -inset-0.5"></span>
                    <svg *ngIf="!isMenuOpen" class="size-15" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true" data-slot="icon">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M14 4h6 M4 12h16 M4 20h16" />
                    </svg>
                    <span *ngIf="!isMenuOpen" class="text-xs mt-0.2">Menu</span>
                    <!--
                        Icon when menu is open.
            
                        Menu open: "block", Menu closed: "hidden"
                    -->
                    <svg *ngIf="isMenuOpen" class="size-15" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Mobile Menu (Hidden by Default) -->
        <div class="lg:hidden" id="mobile-menu" [ngClass]="{'block': isMenuOpen, 'hidden': !isMenuOpen}">
            <div class="space-y-5 px-5 pt-2 pb-3">
            <a (click)="navigateToCategory('Bâtiment')" class="block text-2xl hover:cursor-pointer">Bâtiment</a>
            <a (click)="navigateToCategory('Services')" class="block text-2xl hover:cursor-pointer">Services</a>
            <a (click)="navigateToCategory('Fabrication')" class="block text-2xl hover:cursor-pointer">Fabrication</a>
            <a (click)="navigateToCategory('Alimentation')" class="block text-2xl hover:cursor-pointer">Alimentation</a>
            </div>
        </div>
    </nav>

    <!-- Search bar for Mobile (Hidden by Default) -->
    <div class="lg:hidden lg:flex items-center p-2 shadow-md" id="mobile-search" *ngIf="isSearchOpen">
        <form (ngSubmit)="onSearch()" class="border-b-2 border-r-2 border-[#0074c7] focus-within:ring-1 focus-within:ring-[#0074c7] flex px-5">
            <input type="text" name="search" [(ngModel)]="searchQuery" placeholder="Rechercher..." class="bg-transparent border-none focus:outline-none w-full opacity-50"/>
            <button type="submit" class="rounded-full">
                <img src="https://www.auvergnerhonealpes.fr/themes/custom/aura_region_theme/assets/images/optimized/icons/search-blue.svg" alt="" class="w-full h-8">
            </button>
        </form>
    </div>
</header>